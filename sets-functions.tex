\section{Функции}

{\bfseries Определение.} {\slshape Функцией}, или {\slshape отображением}, из множества $A$ во множество $B$ (обозначение $f:A\to B$) называется множество упорядоченных пар $f\subset A\times B$, таких что для любого $a\in A$ найдётся единственный $b\in B$, такой что $(a, b) \in f$.

Если $(a, b) \in f$, то это часто записывается как $f(a) = b$ или как $f:a \mapsto b$. Множество всех функций $\{f: A\to B\}$ обозначается как $B^A$.

{\bfseries Определение.} Если $f:A \to B$, то множество $A$ называется {\slshape областью определения} функции $f$ и обозначается как $\mathrm{Dom} f$.

Область определения может представлять собой декартово произведение нескольких множеств. В этом случае говорят, что функция является {\slshape функцией нескольких переменных}, где каждое множество соответствует отдельной переменной.

{\bfseries Определение.} Если $f:A \to B$, то множество $B$ называется {\slshape областью значений} функции $f$ и обозначается как $\mathrm{Codom} f$.

{\bfseries Пример.} Логические операции И, ИЛИ, Исключающее ИЛИ, импликация и эквиваленция рассматриваемые нами ранее, являются функциями $f:B\times B \to B$ (это всё функции нескольких переменных), где $B = \{0, 1\}$. Функция НЕ является функцией типа $f: B \to B$.

{\bfseries Пример.} Объединение и пересечение множеств являются функциями типа $f: S \times S \to S$, где $S$ — некоторое множество, состоящее из других множеств.

{\bfseries Пример.} Любой предикат $F$, заданный на некотором множестве $S$ является функцией типа $F: S \to B$, где $B = \{0, 1\}$.

Если говорить о чистой интуиции, то понятие функции имеет две основных трактовки. Первая — это некоторый объект, который по заданному элементу множества $A$ каким-то образом выдаёт какой-то элемент множества $B$. Иногда он берет его из таблицы, иногда есть какая-то формула, по которой можно этот самый $b$ вычислить, иногда какая-то написанная на компьютере программа, которая по $a$ даёт $b$. Если у нас есть некоторое физическое устройство (например, чёрный ящик) с клавиатурой, свалившееся из космоса, которое при наборе какого-то числа даёт в ответ другое число, и мы не знаем как именно оно это делает — это все равно тоже функция.

Мы можем привести множество примеров функций в быту. Если $A$ — множество женатых мужчин, а $B$ — замужних женщин, то функция, сопоставляющая каждому мужчине в соответствие его жену, является функцией вида $f: A\to B$. Если у нас например есть база данных, в которую мы можем вводить имена мужчин, а она отдаёт нам в ответ имена их жён, то эта база данных как раз и будет реализовывать данную функцию.

Можно рассмотреть множество рабочих дней, прошедших от начала торгов на Нью-Йоркской фондовой бирже, и каждому дню сопоставить лидеров роста и падения. Если дни обозначить за $D$, а компании за $C$, то такое сопоставление будет функцией вида $D\to C\times C$.

В дальнейшем мы будем временами приводить примеры из кодирования и криптографии. Шифрование и кодирование — это тоже функции. Если $T$ — множество всех возможных текстов, а $B^\infty$ — множество последовательностей нулей и единиц (как это принято в компьютере на низком уровне), кодирование — это функция $f:T\to B^\infty$. Задачей теории кодирования является построение такой функции $f$, чтобы она обладала какими-то полезными свойствами, например чтобы запись была максимально краткой, либо чтобы она была устойчива к ошибкам, и в случае каких-то сбоев можно было восстановить весь текст и по фрагменту кодировки.

Если $K$ — множество ключей, а $C$ — множество шифровок, то шифрование сводится к реализации функции шифрования $E: T\times K \to C$ и дешифрования $D: C\times K \to T$, которые должны быть выбраны таким образом, чтобы не зная ключа $k\in K$ нельзя было восстановить исходный текст $t \in T$ по шифру $c \in C$.

Если $A$ — множество карточных мастей, а $B$ — множество достоинств карт, то функция, которая ставит каждой карте в соответствие её достоинство, имеет вид $f: A\times B \to B$ и может быть записана формулой как $f: (a, b) \mapsto b$.

Второй интуитивный смысл, который часто имеют функции — это установление соответствия между различными объектами, которое говорит нам что-либо о свойствах этих объектов. Пусть, например, множество $A$ состоит из упорядоченных элементов $a<b<c$, а множество $B$ из элементов $a<b<c<d<e$. Тогда функция $f:A \to B$, которая сопоставляет любому элементу тот же самый элемент другого множества ($f: x\mapsto x$) может показать нам, что множество $A$ в некотором смысле является начальным отрезком множества $B$ — любой элемент последнего множества, не нашедшего себе пары во множестве $A$, будет больше любого другого элемента. Это примитивный пример, но вероятно он как-то продемонстрирует общую идею (если нет, то позже вероятно вы это поймёте на практике).

Рассмотрим более содержательный пример. В первом параграфе мы говорили, что любому предикату на множестве $S$ соответствует подмножество $B$ и наоборот. Это соответствие — тоже функция. Каждый такой предикат — это функция вида $f:S\to B$, и стало быть $f\in B^S$. Тогда функция $p$, которая по предикату даёт подмножество, ему соответствующее, имеет тип $p:B^S \to 2^S$. Забегая вперёд можно сказать, что $2=\{0, 1\}$ (это будет объяснено в третьей главе), и именно отсюда происходит обозначение для булеана.

Отметим так же, что функции используются часто не только для отображения отдельных элементов, но и для отображения подмножеств элементов.

{\bfseries Пример.} Пусть опять $A$ — множество женатых мужчин, $B$ — замужних женщин, а $f: A\to B$ ставит каждому мужчине в соответствие его жену. Пусть теперь $M\subset A$ — подмножество мужчин, работающих в Макдональдсе. Тогда $f(M)$ — это множество женщин, чьи мужья работают в Макдональдсе.

Это можно формализовать при желании и назвать отдельными словами:

{\bfseries Определение.} Если $f(a) = b$, то $b$ называется {\slshape образом} элемента $a$ по отображению $f$.

{\bfseries Определение.} Множество $f(S) = \{y\in \mathrm{Codom}f|\exists x \in S, f(x) = y \}$ называется {\slshape образом} множества $S$ по отображению $f$.

{\bfseries Определение.} Множество $f^{-1}(y) = \{x | f(x) = y \}$ называется {\slshape прообразом} элемента $y$.

{\bfseries Определение.} Множество $f^{-1}(S) = \{x | f(x) \in S \}$ называется {\slshape прообразом} множества $S$.

Обратите внимание на то, что образом любого элемента является только один элемент, а прообразом является целое множество элементов (вполне возможно, что пустое).

{\bfseries Пример.} Пусть $A = \{a, b, c\}$, $f = \{(a, a), (b, c), (c, c)\}$. Тогда $f^{-1}(a) = \{a\}$, $f^{-1}(b) = \emptyset$, $f^{-1}(c) = \{b\}$.

{\bfseries Определение.} Множество $\mathrm{Im} f = f(\mathrm{Dom} f)$ называется {\slshape образом} функции $f$.

Обратите внимание на то, что в общем случае $\mathrm{Im} f \not= \mathrm{Codom} f$. Так, в последнем примере $\mathrm{Im} f = \{a, c\}$, но $\mathrm{Codom}f = \{a, b, c\}$.

{\bfseries Определение.} Единичной функцией на множестве $A$ называется функция $1_A: A\to A$, ставящая любому элементу в соответствие его же самого: $1_A: a\mapsto a$.

{\bfseries Определение.} {\slshape Композицией} функций $f:B\to C$ и $g:A\to B$ называется функция $f\circ g: A\to C$, такая что если $f(b) = c$ и $g(a) = b$, то $(f\circ g)(a) = c$.

{\bfseries Теорема.} Для любой функции $f: A\to B$, $1_B \circ f = f \circ 1_A = f$.

Доказательство в качестве простого упражнения.

{\bfseries Теорема.} Композиция функций ассоциативна: $f\circ (g \circ h) = (f\circ g)\circ h$.

{\bfseries Доказательство.} Достаточно выписать напрямую два значения функции для произвольного элемента $x$, чтобы увидеть это:

Слева: $(f\circ (g \circ h)) (x) = f((g\circ h)(x)) = f(g(h(x)))$

Справа: $((f\circ g) \circ h) (x) = (f\circ g)(h(x)) = f(g(h(x)))$

Как видно, в обоих случаях получается одно и то же значение. \qed

{\bfseries Определение.} Функция называется {\slshape инъективной}, или {\slshape инъекцией}, если $f(a)\not= f(b)$ для любых $a\not= b$.

{\bfseries Определение.} Пусть $f:A\to B$. Функция $f^{-1}_l$, такая что $f^{-1}_l\circ f = 1_A$ называется {\slshape левой обратной}.

{\bfseries Теорема.} Функция имеет левую обратную функцию тогда и только тогда, когда она инъективна.

Докажите эту теорему в качестве упражнения.

{\bfseries Пример.} Любая функция кодирования обязана быть инъективной, поскольку в противном случае была бы возможна ситуация $f(a) = f(b) = c$, и было бы непонятно как мы должны раскодировать $c$ обратно.

{\bfseries Определение.} Если $\mathrm{Im}f = \mathrm{Codom}f$, то функция называется {\slshape сюръективной}, или {\slshape сюръекцией.}

{\bfseries Определение.} Пусть $f: A\to B$. Функция $f^{-1}_r$. такая что $f\circ f^{-1}_r = 1_B$ называется {\slshape правой обратной}.

{\bfseries Теорема.} Функция имеет правую обратную функцию тогда и только тогда, тогда она сюръективна.

Доказательство опять же несложно и я оставляю его читателю в качестве упражнения.

{\bfseries Упражнение.} Пусть $f:A \times B \to A$ и $f: (a, b)\mapsto a$. Докажите, что эта функция сюръективна.

{\bfseries Определение.} Если функция одновременно и сюръективна и инъективна, то она называется {\slshape биективной}, либо {\slshape биекцией}.

{\bfseries Теорема.} Если $f: A\to B$ — биекция, то левая обратная функция будет совпадать с правой обратной функцией.

Доказательство снова в качестве несложного упражнения. Понятно, что в случае с биекциями разница между левой обратной и правой обратной функцией пропадает (в случае же сюръекции или инъекции существует лишь одна из них), и поэтому такая функция называется просто {\slshape обратной}. Если функция плюс ко всему является обратной самой себе (то есть $f(f(x)) = x$, очевидно, что это возможно лишь для отображений вида $A\to A$), то она называется \term{инволюцией}.

Также полезно заметить, что произвольную инъективную функцию возможно сделать биективной, если заменить её область значений лишь её образом, то есть если $C = \mathrm{Im} f$, то вместо функции $f: A\to B$ рассмотреть функцию $f: A \to C$. Легко проверить, что в этом случае функция действительно станет биекцией.

Для сюръекции подобное утверждение тоже верно, но только при отдельных оговорках.

{\bfseries Определение.} Ограничением функции $f: A\to B$ на $S\subset A$ называется функция $f|_S: S\to B$, такая что для любого $x\in S$ верно, что $f|_S(x) = f(x)$.

Несколько более формально и точно, но менее понятно можно написать, что $f|_S = f \cap S \times B$.

Для произвольной сюръективной функции можно было бы попробовать искать такое ограничение этой функции, чтобы она стала биекцией. Предположение это на первый взгляд довольно очевидно, однако оказывается, что оно эквивалентно так называемой аксиоме выбора, которую во-первых нельзя взять и доказать, а во-вторых из которой следует множество парадоксов. Подробнее мы будем обсуждать эту тему далее в этом курсе (и совсем немного в следующем параграфе), пока что можно просто принять к сведению (хотя это и не принципиальной важности факт), что доказать существование такого ограничение невозможно.

{\bfseries Определение.} Множества $A$ и $B$ называются {\slshape равномощными} (обозначение $|A| = |B|$), если существует биекция $f: A\to B$.

Равномощность говорит о том, что элементы множеств $A$ и $B$ можно поставить во взаимооднозначное соответствие. Часто это интерпретируется как то, что они содержат одинаковое число элементов. Это правда довольно опасная интерпретация, что станет ясно, когда мы начнём говорить о бесконечных множествах. Пока же в принципе довольно удобно воспринимать равномощность именно так. имея  правда ввиду, что это сгодится лишь только для довольно маленьких множеств.

{\bfseries Пример.} Пусть $A = \{1, 2, 3\}$, $B = \{a, b, c\}$. Тогда эти множества равномощны, поскольку существует биекция $f=\{(1, a), (2, b) , (3, c)\}$.

{\bfseries Пример.} Пусть $A$ — множество женатых мужчин, а $B$ — множество замужних женщин. Эти множества равномощны.

{\bfseries Упражнение.} Приведите пример неравномощных множеств и двух отображений на них: сюръективного и инъективного.
