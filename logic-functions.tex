\section{Представление функций}

В прошлом параграфе мы определили с помощью таблиц истинности 5 логических операций. Нам никто не мешает определить и другие операции, задав их таблицу истинности, причем им не обязательно иметь один или два параметра — можно и больше, никто не запрещает. Для примера рассмотрим операцию (удобнее наверное называть это функцией) $f$ с тремя параметрами, описанную в таблице 1.4. Записывать эту операцию мы будем как $f(a, b, c)$. По таблице легко находить ее значения при конкретных параметрах, например: $f(0,0,1) = 0$ или $f(1,0,1) = 1$.

\begin{table}[h]
\centering
\begin{tabular}{ccc|c}
$a$&$b$&$c$&$f$\\
\hline
0&0&0&1\\
0&0&1&0\\
0&1&0&1\\
0&1&1&0\\
1&0&0&1\\
1&0&1&1\\
1&1&0&0\\
1&1&1&0
\end{tabular}
\caption{Представление булевой функции с тремя параметрами}
\end{table}

Какой физический смысл данной функции/операции? Пока никакого — мы делаем то что мы делаем просто потому что мы можем это делать. В математике часто так поступают, а применение это все находит позже.

Теперь давайте поймем как определить эту же самую функцию, выразив ее через уже известные нам логические операции.

Для начала рассмотрим более простую функцию $g_0$, которая имеет значение $1$ только при наборе параметров $g_0(1, 0, 1)$, а во всех остальных случаях ее значением будет $0$. Легко догадаться, что такая функция в точности представляется как $g_0(a, b, c) = a\wedge \neg b \wedge c$. Рассмотрим так же функцию $g_1(a, b, c)$, которая принимает значение $1$ только на наборе аргументов $g_1(0, 0, 0)$. Ее соответственно можно представить как $g_1(a, b, c) = \neg a \wedge \neg b \wedge \neg c$.

Теперь рассмотрим функцию $h$, которая принимает значение $1$ на обоих наборах параметров $(1, 0, 1)$ и $(0, 0, 0)$. Это можно сформулировать так:   значение функции $h$ истинно, когда истинно значение хотя бы одной из функций $g_0$ и $g_1$. Сказанное дословно переносится на язык математической логики следующим образом: $$h(a, b, c) = g_0(a, b, c) \vee g_1(a, b, c).$$

Подставив сюда выражения для $g_0$ и $g_1$ получаем: $$h(a, b, c) = (a\wedge \neg b \wedge c) \vee (\neg a \wedge \neg b \wedge \neg c).$$

Продолжая рассуждать таким же образом, можно прийти и к выражению для функции $f$, заданной выше таблицей истинности: $$f(a, b, c) = (\neg a \wedge \neg b \wedge \neg c) \vee (\neg a \wedge b \wedge \neg c)\vee (a \wedge \neg b \wedge \neg c) \vee (a\wedge \neg b \wedge c). $$

Легко видеть как получается такое представление: мы просто перечисляем все строки таблицы истинности, в которых функция принимает значение $1$, соединяя параметры функции операцией И (если значение параметра $0$, то перед ним добавляем отрицание), а сами наборы, при которых функция истинна, соединяя операцией ИЛИ. То есть если у нас есть таблица истинности, всегда возможно особо не думая записать чему эта функция равна, используя только операции И, ИЛИ и НЕ.

Такая развернутая форма записи функций называется дизъюнктивной нормальной формой (ДНФ). Запоминать это не нужно — за пределами этого параграфа данный термин нам больше не понадобится. Суть такого представления заключается в том, что функция выражается как дизъюнкция (операция ИЛИ) некоторого количества конъюнктов (параметров функции, объединенных операцией И).

Можно получить и другое представление, если вначале выразить по нашей схеме не саму функцию, а ее отрицание:
$$\neg f(a, b, c) = (\neg a \wedge \neg b \wedge c) \vee (\neg a \wedge b \wedge c) \vee (a\wedge b\wedge \neg c) \vee (a\wedge b \wedge c).$$

Теперь можно взять отрицание этого выражения, и используя закон де Моргана получить такое выражение:
$$f(a, b, c) = (a \vee b \vee \neg c)\wedge(a\vee \neg b\vee \neg c)\wedge(\neg a\vee \neg b\vee c)\wedge(\neg a\vee\neg b\vee \neg c).$$

Мы здесь фактически перевернули знаки $\wedge$ и $\vee$, а так же ко всем высказываниям применили операцию отрицания — это как раз и есть по сути закон де Моргана. Проведите эти рассуждения подробнее самостоятельно.

Новую форму записи так же легко получить по таблице истинности, особо не задумываясь над смыслом операции — мы делаем все то же самое что и в прошлый раз, но только на этот раз перечисляем не единицы таблицы, а нули, и везде подменяем И на ИЛИ и наоборот, а вхождения параметров в нашу формулу снабжаем отрицанием.

Такая форма записи называется конъюнктивной нормальной формой (КНФ) и представляет она из себя конъюнкцию (операция И) некоторого количества дизъюнктов (параметров функции, объединенных операцией ИЛИ).

В случае функции $f$ оба подхода оказались в принципе практически одинаковыми. В разных случаях однако какой-то из них может оказаться короче, в зависимости от того, какие значения наша функция принимает чаще.

Рассмотрим импликацию:

\begin{table}[h]
\centering
\begin{tabular}{cc|c}
$a$&$b$&$a\rightarrow b$\\
\hline
0&0&1 \\
0&1&1 \\
1&0&0 \\
1&1&1
\end{tabular}
\caption{Таблица истинности для импликации}
\end{table}

Для этой операции описанные нами подходы представления функции дают следующие результаты:

ДНФ: $a \rightarrow b = (\neg a\wedge \neg b)\vee(\neg a \wedge b)\vee(a\wedge b)$

КНФ: $a\rightarrow b = \neg a \vee b$

КНФ здесь оказывается удобнее. Так же этот подход можно рассматривать как альтернативу методикам доказательсв, представленных в первом параграфе.

\begin{exercise} Запишите КНФ и ДНФ для операций «исключающее или» и «эквиваленция».\end{exercise}

Вообще же следовать каждый раз именно такой схеме чаще всего оказывается расточительно. Если посмотреть внимательнее на таблицу истинности для $f$, то можно заметить, что в случае истинности $a$, функция принимает истинное значение при ложном $b$, и значение $c$ там уже не важно. При ложности же $a$ нам важно лишь значение $c$ и не важно $b$. С учетом этих наблюдений, функция $f$ может быть записана совсем просто: $$f(a, b, c) = (\neg a\wedge \neg c) \vee (a \wedge \neg b)$$

Получается гораздо красивее чем было. Обычно в курсах логики значительная часть времени посвящается как раз упрощению формул. Мы могли бы рассмотреть много примеров и типичные приемы, которые могут применяться, но вряд ли это окажется сильно полезно. Если вам когда-либо придется заниматься подобной ерундой (что сомнительно), могу лишь посоветовать подходить к задаче творчески, а не искать универсальных подходов.

Нас же сейчас из всего сказанного на самом деле больше интересует принципиальная возможность построения КНФ и ДНФ для произвольной формулы. Из наших рассуждений непосредственно следует такая простенькая теорема:

\begin{thm}Любая логическая функция может быть представлена с помощью операций И, ИЛИ и НЕ.\end{thm}

В силу этого, данные операции можно называть базисом нашей логической системы (неформально говоря базис — это некий набор компонентов, из которых можно собрать любой другой объект, оговоренный в нашей системе). Однако, базис этот не единственный, можно придумать и другие наборы функций, через которые так же можно будет выразить любую логическую операцию. Примером служит следующая теорема:

\begin{thm}Любая логическая функция может быть представлена с помощью операций И, Исключающее ИЛИ и константы 1.\end{thm}

\begin{proof}Операции ИЛИ и НЕ можно представить через $\wedge$, $\oplus$ и $1$:

Представление ИЛИ: $a\vee b = a \oplus b \oplus (a\wedge b)$

Представление НЕ: $\neg a = a \oplus 1$

Ну а поскольку через функции ИЛИ, НЕ и И мы можем представить любую функцию, то отсюда понятно, что и через И, XOR и 1 мы так же можем представить любую функцию.\end{proof}

Таким образом $\wedge$, $\oplus$ и $1$ так же являются базисом нашей логической системы, который часто называется базисом Жегалкина. При работе в базисе Жегалкина оказываются удобными следующие соглашения о записи и названии логических операций:

\begin{enumerate}
\item $a\wedge b$ записывается просто как $ab$ и называется умножением,
\item $a \oplus b$ записывается как $a + b$ и называется сложением.
\end{enumerate}

С этими соглашениями основные свойства логических операций будут выглядеть так:

\begin{enumerate}
\item $a\vee b=a + b +ab$,
\item $\neg a = a + 1$,
\item $a(b+c) = ab + ac$,
\item $aa = a$,
\item $a + a = 0$.
\end{enumerate}

Эти формулы легко запоминаются и с ними оказывается очень просто работать (а позже мы увидим, что такая запись и название операций имеют и более глубинный смысл). Для примера, выразим в базисе Жегалкина, следуя нашим соглашениями, импликацию: $$a \rightarrow b = \neg a \vee b = (1 + a) + b + b(1 + a) = 1 + a + b + b + ab = 1 + a + ab$$

Здесь мы сократили $b+b$.

\begin{exercise} Выведите формулу для эквиваленции: $$a \leftrightarrow b = 1 + a + b$$\end{exercise}

\begin{exercise} Выведите формулу для упомянутой ранее функции $f$.\end{exercise}

\begin{exercise} Докажите, что любая логическая функция может быть выражена с помощью лишь одной операции «штрих Шеффера», которая определяется как $a|b = \neg(a\wedge b) = 1 + ab$. (Использование значений $1$ или $0$ в записи так же недопустимо).\end{exercise}

Часто возникает и обратная задача --- зная какие-то свойства логической функции, надо определить её значения истинности в таблице. В следующем параграфе мы рассмотрим большую и сложную задачу, на первый взгляд с формальной логикой никак не связанную, которая решается как раз путём построения логческой функии, удовлетворящей заданным критериям. Пока же, как простой пример, мы построим таблицу истинности для импликации --- я уже упоминал, что она в значительной степени является следствием не каких-то логических соображений, а скорее формальной нужды. Сейчас мы это уже готовы продемонстрировать. Значения импликации, если рассматривать её как логическое следствие, для истинной посылки очевидны:

\begin{table}[h]
\centering
\begin{tabular}{cc|c}
$a$ & $b$ & $a \to b$ \\
\hline
0 & 0 & ? \\
0 & 1 & ? \\
1 & 0 & 0 \\
1 & 1 & 1
\end{tabular}
\caption{Неполная таблица истинности для импликации}
\end{table}

Чтобы определить значения в оставшихся ячейках, обозначенных символом <<?>>, необходимо рассмотреть какими свойствами должно обладать логическое следствие, и проверить какие ограничения эти свойства накладывают на таблицу истинности. Самое лочичное требование к имплицакии, которое мы уже приводили в первом параграфе -- это требование транзитивности: <<Если из $a$ следует $b$, и из $b$ следует $c$, то из $a$ следует $c$>>. Формально это свойство записывается как $$((a\to b) \land (b \to c)) \to (a\to c) $$

Если подставить в это выражение вместо $a$ и $b$ истину ($1$), а вместо $c$ --- ложь ($0$), то, вычисляя как в первом параграфе значение истинности для логических связок, нам известных, мы сведем свойство транзитивности к следствию $0 \to 0$, и это выражение обязано быть истинным, если мы хотим, чтобы свойство транзитивности выполнялось для импликации. Если теперь, зная, что $(0 \to 0) = 1$, подставить вместо $a$ и $c$ истину, а вместо $b$ ложь, то мы получим, что так же должно быть истинным и выражение $0 \to 1$. Это завершает постороение таблицы истинности для импликации. Таким образом, её таблица истинности --- это в некотором смысле вынужденная таблица, в противном случае импликация не удовлетворяла бы тем свойствам, которые мы ожидаем от операции логического следствия.

\begin{exercise}Можно было бы определить импликацию, опираясь не на свойство транзитивности, а на закон исключённого третьего ($a \land \neg a = 0$) и того факта, что эквивалентность подразумевает в том числе и следствие: $(a \leftrightarrow b) \to (a \to b)$. Используя эти два свойства, определите таблицу истинности для импликации, не используя транзитивности.\end{exercise}
