\section{Представление функций}

В прошлом параграфе мы определили с помощью таблиц истинности пять логических операций. Нам никто не мешает определить и другие операции, задав их таблицу истинности, причём им не обязательно иметь один или два параметра — можно и больше, никто не запрещает. Для примера рассмотрим операцию (удобней, наверное, называть её функцией) $f$ с тремя параметрами, описанную в таблице 1.4. Записывать эту операцию мы будем как $f(a, b, c)$. По таблице легко находить её значения при конкретных параметрах, например: $f(0,0,1) = 0$ или $f(1,0,1) = 1$.

\begin{table}[h]
\centering
\begin{tabular}{ccc|c}
$a$&$b$&$c$&$f$\\
\hline
0&0&0&1\\
0&0&1&0\\
0&1&0&1\\
0&1&1&0\\
1&0&0&1\\
1&0&1&1\\
1&1&0&0\\
1&1&1&0
\end{tabular}
\caption{Представление булевой функции с тремя параметрами}
\end{table}

Какой физический смысл данной функции/операции? Пока никакого — мы делаем то, что мы делаем, просто потому, что мы можем это делать. В математике часто так поступают, а применение это всё находит позже.

Теперь давайте поймём, как определить эту же самую функцию, выразив её через уже известные нам логические операции.

Для начала рассмотрим более простую функцию $g_0$, которая имеет значение $1$ только при наборе параметров $g_0(1, 0, 1)$, а во всех остальных случаях её значением будет $0$. Легко догадаться, что такая функция в точности представляется как: $$g_0(a, b, c) = a\land \neg b \land c.$$ Рассмотрим также функцию $g_1(a, b, c)$, которая принимает значение $1$ только на наборе аргументов $g_1(0, 0, 0)$. Её, соответственно, можно представить как: $$g_1(a, b, c) = \neg a \land \neg b \land \neg c.$$

Теперь рассмотрим функцию $h$, которая принимает значение~$1$ на обоих наборах параметров $(1, 0, 1)$ и $(0, 0, 0)$. Это можно сформулировать так:   значение функции $h$ истинно, когда истинно значение хотя бы одной из функций $g_0$ и $g_1$. Сказанное дословно переносится на язык математической логики следующим образом: $$h(a, b, c) = g_0(a, b, c) \lor g_1(a, b, c).$$

Подставив сюда выражения для $g_0$ и $g_1$, получаем: $$h(a, b, c) = (a\land \neg b \land c) \lor (\neg a \land \neg b \land \neg c).$$

Продолжая рассуждать таким же образом, можно прийти и к выражению для функции $f$, заданной выше таблицей истинности: $$f(a, b, c) = (\neg a \land \neg b \land \neg c) \lor (\neg a \land b \land \neg c)\lor (a \land \neg b \land \neg c) \lor (a\land \neg b \land c). $$

Легко видеть, как получается такое представление: мы просто перечисляем все строки таблицы истинности, в которых функция принимает значение $1$, соединяя параметры функции операцией И (если значение параметра $0$, то перед ним добавляем отрицание), а сами наборы, при которых функция истинна, соединяя операцией ИЛИ. То есть если у нас есть таблица истинности, всегда возможно особо не думая записать, чему эта функция равна, используя только операции И, ИЛИ и НЕ.

Такая развёрнутая форма записи функций называется \term{дизъюнктивной нормальной формой} (ДНФ). Запоминать это не нужно — за пределами этого параграфа данный термин нам больше не понадобится. Суть такого представления заключается в том, что функция выражается как дизъюнкция (операция ИЛИ) некоторого количества конъюнктов (параметров функции, объединённых операцией И).

Можно получить и другое представление, если вначале выразить по нашей схеме не саму функцию, а её отрицание:
$$\neg f(a, b, c) = (\neg a \land \neg b \land c) \lor (\neg a \land b \land c) \lor (a\land b\land \neg c) \lor (a\land b \land c).$$

Теперь можно взять отрицание этого выражения и, используя закон де Моргана, получить такое выражение:
$$f(a, b, c) = (a \lor b \lor \neg c)\land(a\lor \neg b\lor \neg c)\land(\neg a\lor \neg b\lor c)\land(\neg a\lor\neg b\lor \neg c).$$

Мы здесь фактически перевернули знаки $\land$ и $\lor$, а также ко~всем высказываниям применили операцию отрицания — это, по сути, как раз и есть закон де Моргана. Проведите эти рассуждения подробнее самостоятельно.

Новую форму записи также легко получить по таблице истинности, особо не задумываясь над смыслом операции — мы делаем всё то же самое, что и в прошлый раз, но только на этот раз перечисляем не единицы таблицы, а нули, и везде подменяем И на ИЛИ и наоборот, а вхождения параметров в нашу формулу снабжаем отрицанием.

Такая форма записи называется \term{конъюнктивной нормальной формой} (КНФ), и представляет она из себя конъюнкцию (операция И) некоторого количества дизъюнктов (параметров функции, объединённых операцией ИЛИ).

В случае функции $f$ оба подхода оказались практически одинаковыми. В разных случаях, однако, какой-то из них может оказаться короче --- в зависимости от того, какие значения наша функция принимает чаще.

Рассмотрим импликацию:

\begin{table}[h]
\centering
\begin{tabular}{cc|c}
$a$&$b$&$a\rightarrow b$\\
\hline
0&0&1 \\
0&1&1 \\
1&0&0 \\
1&1&1
\end{tabular}
\caption{Таблица истинности для импликации}
\end{table}

Для этой операции описанные нами подходы представления функции дают следующие результаты:

\subparagraph{ДНФ:} $a \rightarrow b = (\neg a\land \neg b)\lor(\neg a \land b)\lor(a\land b)$

\subparagraph{КНФ:} $a\rightarrow b = \neg a \lor b$

\subparagraph{} КНФ здесь оказывается удобнее. Также этот подход можно рассматривать как альтернативу методикам доказательств, представленных в первом параграфе.

\begin{exercise} Запишите КНФ и ДНФ для операций «исключающее ИЛИ» и «эквиваленция».\end{exercise}

Вообще же следовать каждый раз именно такой схеме чаще всего оказывается расточительно. Если посмотреть вни\-ма\-тельнее на таблицу истинности для $f$, то можно заметить, что в случае истинности $a$ функция принимает истинное значение при ложном $b$, и значение $c$ там уже не важно. При ложности же $a$ нам важно лишь значение $c$ и не важно $b$. С учётом этих наблюдений функция $f$ может быть записана совсем просто: $$f(a, b, c) = (\neg a\land \neg c) \lor (a \land \neg b)$$

Получается гораздо красивее, чем было. Обычно в курсах логики значительная часть времени посвящается как раз упрощению формул. Мы могли бы рассмотреть много примеров и типичные приёмы, но вряд ли это окажется сильно полезно. Если вам когда-либо придётся заниматься подобной ерундой (что сомнительно), могу лишь посоветовать подходить к задаче творчески, а не искать универсальных подходов.

Нас же сейчас из всего сказанного больше интересует принципиальная возможность построения КНФ и ДНФ для произвольной формулы. Из наших рассуждений непосредственно следует такая простенькая теорема:

\begin{thm}Любая логическая функция может быть представлена с помощью операций <<И>>, <<ИЛИ>> и <<НЕ>>.\end{thm}

Данные операции можно называть базисом нашей логической системы (неформально говоря, базис~--- это некий набор компонентов, из которых можно собрать любой другой объект, оговорённый в нашей системе). Однако базис этот не единственный, можно придумать и другие наборы функций, через которые \mbox{также} можно будет выразить любую логическую операцию. Примером служит следующая теорема:

\begin{thm}Любая логическая функция может быть представлена с помощью операций <<И>>, <<исключающее ИЛИ>> и константы 1.\end{thm}

\begin{proof}Операции ИЛИ и НЕ можно представить через $\land$, $\oplus$ и $1$:

Представление ИЛИ: $a\lor b = a \oplus b \oplus (a\land b)$

Представление НЕ: $\neg a = a \oplus 1$

Ну а поскольку через функции ИЛИ, НЕ и И мы можем представить любую функцию, то отсюда понятно, что и через И, XOR и 1 мы также можем представить любую функцию.\end{proof}

Таким образом $\land$, $\oplus$ и $1$ также являются базисом нашей логической системы, который часто называется базисом Жегалкина. При работе в базисе Жегалкина оказываются удобными следующие соглашения о записи и названии логических операций:

\begin{enumerate}
\item $a\land b$ записывается просто как $ab$ и называется умножением,
\item $a \oplus b$ записывается как $a + b$ и называется сложением.
\end{enumerate}

С этими соглашениями основные свойства логических операций будут выглядеть так:

\begin{enumerate}
\item $a\lor b=a + b +ab$,
\item $\neg a = a + 1$,
\item $a(b+c) = ab + ac$,
\item $aa = a$,
\item $a + a = 0$.
\end{enumerate}

Эти формулы легко запоминаются и с ними оказывается очень просто работать (позже мы увидим, что такая запись и названия операций имеют и более глубинный смысл). Для примера выразим в базисе Жегалкина, следуя нашим соглашениям, импликацию: $$a \rightarrow b = \neg a \lor b = (1 + a) + b + b(1 + a) = 1 + a + b + b + ab = 1 + a + ab$$

Здесь мы сократили $b+b$.

\begin{exercise} Выведите формулу для эквиваленции: $$a \leftrightarrow b = 1 + a + b$$\end{exercise}

\begin{exercise} Выведите формулу для упомянутой ранее функции $f$.\end{exercise}

\begin{exercise} Докажите, что любая логическая функция может быть выражена с помощью лишь одной операции «штрих Шеффера», которая определяется как $a|b = \neg(a\land b) = 1 + ab$. (Использование значений $1$ или $0$ в записи тоже недопустимо.)\end{exercise}

Часто возникает и обратная задача --- зная какие-то свойства логической функции, определить её значения истинности в таблице. В следующем параграфе мы рассмотрим большую и сложную задачу, на первый взгляд с формальной логикой никак не связанную, которая решается как раз путём построения логической функции, удовлетворяющей заданным критериям. Пока же, как простой пример, мы построим таблицу истинности для импликации --- я уже упоминал, что она в значительной степени является следствием не каких-то логических соображений, а скорее формальной нужды. Сейчас мы уже готовы это продемонстрировать. Значения импликации, если рассматривать её как логическое следствие, для истинной посылки очевидны:

\begin{table}[h]
\centering
\begin{tabular}{cc|c}
$a$ & $b$ & $a \to b$ \\
\hline
0 & 0 & ? \\
0 & 1 & ? \\
1 & 0 & 0 \\
1 & 1 & 1
\end{tabular}
\caption{Неполная таблица истинности для импликации}
\end{table}

Чтобы определить значения в оставшихся ячейках, обозначенных символом <<?>>, необходимо рассмотреть, какими свойствами должно обладать логическое следствие, и проверить, какие ограничения эти свойства накладывают на таблицу истинности. Самое логичное требование к импликации, которое мы уже приво\-ди\-ли в первом параграфе --- это требование транзитивности: \mbox{<<Если} из $a$ следует $b$ и из $b$ следует $c$, то из $a$ следует $c$>>. Формально это свойство записывается так: $$((a\to b) \land (b \to c)) \to (a\to c).$$

Если подставить в это выражение вместо $a$ и $b$ истину ($1$), а вместо $c$ --- ложь ($0$), то, вычисляя (как в первом параграфе) значение истинности для логических связок, нам известных, мы сведём свойство транзитивности к следствию $0 \to 0$, и это выражение обязано быть истинным, если мы хотим, чтобы свойство транзитивности выполнялось для импликации. Если теперь, зная, что $(0 \to 0) = 1$, подставить вместо $a$ и $c$ истину, а вместо $b$ ложь, то мы получим, что также должно быть истинным и выражение $0 \to 1$. Это завершает построение таблицы истинности для импликации. Таким образом, её таблица истинности --- это в некотором смысле вынужденная таблица, в противном случае импликация не удовлетворяла бы тем свойствам, которые мы ожидаем от операции логического следствия.
